import{Y as e,au as o,k as t,bp as n,s as l,ac as a,w as s,L as u,aB as c,bq as d,aD as r,a5 as i,c as p,e as f,g as y,R as m,H as v,a2 as b,W as C,a4 as g,aE as x,r as k,bf as B,m as M,aq as S,p as h,n as w,M as I,br as E}from"./index-0da987e2.js";import{P as D}from"./vnode-4bf6f067.js";import{i as F}from"./icon-4e42d34f.js";import{U as O}from"./event-b1948b12.js";import{u as z}from"./index-1255d72d.js";import{g as A}from"./scroll-392909db.js";const T=e=>{if(!e)return{onClick:i,onMousedown:i,onMouseup:i};let o=!1,t=!1;return{onClick:n=>{o&&t&&e(n),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}},L=p({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:f([String,Array,Object])},zIndex:{type:f([String,Number])}});const j=y({name:"ElOverlay",props:L,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:n}){const l=t("overlay"),{onClick:a,onMousedown:s,onMouseup:u}=T(e.customMaskEvent?void 0:e=>{n("click",e)});return()=>e.mask?m("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:u},[v(o,"default")],D.STYLE|D.CLASS|D.PROPS,["onClick","onMouseup","onMousedown"]):b("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[v(o,"default")])}}),P=p({center:Boolean,alignCenter:Boolean,closeIcon:{type:F},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),N={close:()=>!0},R=p({...P,appendToBody:Boolean,appendTo:{type:f(String),default:"body"},beforeClose:{type:f(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Y={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[O]:e=>C(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},$=(i,p)=>{var f;const y=g().emit,{nextZIndex:m}=x();let v="";const b=z(),C=z(),D=k(!1),F=k(!1),T=k(!1),L=k(null!=(f=i.zIndex)?f:m());let j,P;const N=B("namespace",E),R=M((()=>{const e={},o=`--${N.value}-dialog`;return i.fullscreen||(i.top&&(e[`${o}-margin-top`]=i.top),i.width&&(e[`${o}-width`]=S(i.width))),e})),Y=M((()=>i.alignCenter?{display:"flex"}:{}));function $(){null==P||P(),null==j||j(),i.openDelay&&i.openDelay>0?({stop:j}=l.useTimeoutFn((()=>V()),i.openDelay)):V()}function q(){null==j||j(),null==P||P(),i.closeDelay&&i.closeDelay>0?({stop:P}=l.useTimeoutFn((()=>U()),i.closeDelay)):U()}function H(){i.beforeClose?i.beforeClose((function(e){e||(F.value=!0,D.value=!1)})):q()}function V(){l.isClient&&(D.value=!0)}function U(){D.value=!1}return i.lockScroll&&((i,p={})=>{e(i)||o("[useLockscreen]","You need to pass a ref param to this function");const f=p.ns||t("popup"),y=n((()=>f.bm("parent","hidden")));if(!l.isClient||a(document.body,y.value))return;let m=0,v=!1,b="0";const C=()=>{setTimeout((()=>{r(null==document?void 0:document.body,y.value),v&&document&&(document.body.style.width=b)}),200)};s(i,(e=>{if(!e)return void C();v=!a(document.body,y.value),v&&(b=document.body.style.width),m=A(f.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,t=u(document.body,"overflowY");m>0&&(o||"scroll"===t)&&v&&(document.body.style.width=`calc(100% - ${m}px)`),c(document.body,y.value)})),d((()=>C()))})(D),s((()=>i.modelValue),(e=>{e?(F.value=!1,$(),T.value=!0,L.value=h.isUndefined(i.zIndex)?m():L.value++,w((()=>{y("open"),p.value&&(p.value.scrollTop=0)}))):D.value&&q()})),s((()=>i.fullscreen),(e=>{p.value&&(e?(v=p.value.style.transform,p.value.style.transform=""):p.value.style.transform=v)})),I((()=>{i.modelValue&&(D.value=!0,T.value=!0,$())})),{afterEnter:function(){y("opened")},afterLeave:function(){y("closed"),y(O,!1),i.destroyOnClose&&(T.value=!1)},beforeLeave:function(){y("close")},handleClose:H,onModalClick:function(){i.closeOnClickModal&&H()},close:q,doClose:U,onOpenAutoFocus:function(){y("openAutoFocus")},onCloseAutoFocus:function(){y("closeAutoFocus")},onCloseRequested:function(){i.closeOnPressEscape&&H()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:b,bodyId:C,closed:F,style:R,overlayDialogStyle:Y,rendered:T,visible:D,zIndex:L}};export{j as E,Y as a,P as b,N as c,R as d,T as e,$ as u};